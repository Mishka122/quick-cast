import{getDeviceType as e}from"./devices-CLYmANtz.min.js";class t{constructor(e){const t={target:!1,devices:"desktop,mobile,tablet",selectors:{panels:!1,header:!1,content:!1},animation:{delayStart:0,delayComplete:0,durationStart:.8,durationComplete:.8,easeStart:"power1.inOut",easeComplete:"power2.out"},behavior:{initialPanel:!1},onStart:!1,onComplete:!1,usePreset:!1,useCustom:!1};this.options={...t,...e,selectors:{...t.selectors,...e.selectors},animation:{...t.animation,...e.animation},behavior:{...t.behavior,...e.behavior}},this.deviceControl()&&this.init()}deviceControl(){const t=this.options.devices.split(","),o=e();return t.includes(o)}init(){const e=this.options.behavior.initialPanel,t=document.querySelector(`${this.options.target}`),o=t.querySelectorAll(`${this.options.selectors.panels}`).length>0?t.querySelectorAll(`${this.options.selectors.panels}`):t.querySelectorAll(":scope > *"),s=this.options.animation.durationStart,i=this.options.animation.delayStart,n=this.options.animation.easeStart,r=this.options.animation.durationComplete,a=this.options.animation.delayComplete,l=this.options.animation.easeComplete,c=this.options.useCustom,p=this.options.usePreset,u=this.options.onStart,h=this.options.onComplete;parseFloat(window.getComputedStyle(document.querySelector("html")).fontSize);let d=null,m=null;o.forEach(((t,y)=>{const S=t.querySelector(`${this.options.selectors.header}`)||t.querySelector(":scope > *");if(S){const g=S.offsetHeight,v=t.scrollHeight;gsap.set(t,{height:`${g}px`}),gsap.set(t,{overflow:"hidden"}),gsap.set(S,{cursor:"pointer"});const q=e=>{const t={get currentPanel(){return e},get previousPanel(){return m},get event(){return"open"}};if(c)c({qcApi:t});else if("classic"==p||!p){const o=e.querySelector(`${this.options.selectors.content}`)||e.querySelectorAll(":scope > *")[1];gsap.to(e,{delay:i,duration:s,ease:n,height:`${v}px`}),gsap.fromTo(o,{y:"1rem",opacity:0},{delay:i,y:"0rem",opacity:1,duration:s/2,ease:"power1.out",onStart:u?u({qcApi:t}):null})}},C=e=>{const t={get currentPanel(){return e},get previousPanel(){return m},get event(){return"close"}};if(c)c({qcApi:t});else if("classic"==p||!p){const o=e.querySelector(`${this.options.selectors.content}`)||e.querySelectorAll(":scope > *")[1];gsap.to(e,{delay:a,duration:r,ease:l,height:`${g}px`}),gsap.to(o,{delay:a,y:"1rem",opacity:0,duration:r/2,ease:"power1.out",onStart:h?h({qcApi:t}):null},"<")}};S.addEventListener("click",(()=>{d===y?(C(t),d=null):null===d?(q(t),d=y):(C(m),q(t),d=y),m=o[d]})),y===e&&(q(t),d=y,m=o[d])}}))}}export{t as Accordion};
